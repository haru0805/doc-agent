# AGENTS.md

## プロジェクト概要
このプロジェクトは、n8nを使用してニュースを自動要約するワークフローを構築するものです。

ワークフローの流れ：
1. 毎日06:00（日本時間）に実行
2. Gmail、RSS、noteから記事取得
3. ローカルLLM（Ollama）で要約
4. Notionデータベースへ保存

---

## 技術スタック
- Ubuntu
- Docker
- n8n（セルフホスト）
- Ollama（ローカルLLM）
- Notion API

---

## 基本方針
1. クラウドAPIよりローカル処理を優先する
2. 有料サービスは使用しない（明示的な指示がある場合を除く）
3. 自動化の中核はn8nとする
4. ワークフローはモジュール化する
5. インポート可能なn8n JSONを生成する

---

## ワークフロー要件
生成するワークフローは以下を満たすこと：

- Cronノード（06:00 JST）から開始
- 以下のいずれかから記事取得：
  - Gmail
  - RSS
- 記事本文を抽出
- Ollama APIへ送信して要約
- Notionへ保存

---

## Ollama API仕様
エンドポイント：
http://localhost:11434/api/generate

デフォルトモデル：
phi3

プロンプト形式：
次の記事を日本語で3〜5行の箇条書きで要約してください。

---

## Notionデータベース構造
プロパティ：

- タイトル（title）
- 日付（date）
- 要約（rich_text）
- URL（url）

---

## コーディングルール
- ワークフロー生成時は必ず有効なJSONを出力する
- JSON要求時は説明文を含めない
- ノード名は分かりやすくする
- 不要なノードは追加しない

---

## 出力仕様
ワークフロー生成時：

- 完全なn8n workflow JSONを出力
- 全ノードが接続されていること
- 可能な限り環境変数を使用
